version: 2.1
jobs:
  terraform_apply:
    working_directory: ~/tmp
    docker:
            - image: hashicorp/terraform:full
    environment:
            - AWS_ACCESS_KEY_ID: $AWS_ACCESS_KEY_ID
            - AWS_SECRET_ACCESS_KEY: $AWS_SECRET_ACCESS_KEY
    steps:
      - checkout
      - run:
          name: terraform init
          command: |
            terraform init

workflows:
  version: 2.1
  terraform:
    jobs:
      - terraform_apply

